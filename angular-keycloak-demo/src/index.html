<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Conduit</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--
  <link href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Titillium+Web:700|Source+Serif+Pro:400,700|Merriweather+Sans:400,700|Source+Sans+Pro:400,300,600,700,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="//demo.productionready.io/main.css">
  <script src="http://127.0.0.1:8082/auth/js/keycloak.js" type="text/javascript"></script>-->
</head>
<body>
  <app-root>Loading...</app-root>
</body>

<script type="text/javascript">
/**
  const keycloak = Keycloak({
      realm: "master",
      url: 'http://127.0.0.1:8082/auth',
      clientId: 'frontend-client',
      credentials : {secret: "fe661427-15f2-4c6e-bda3-012eccc5e795"}
  });
  const loadData = () => {
      console.log(keycloak.subject);
      if (keycloak.idToken) {
          document.location.href = "?user="+keycloak.idTokenParsed.preferred_username;
          console.log('IDToken');
          console.log(keycloak.idTokenParsed.preferred_username);
          console.log(keycloak.idTokenParsed.email);
          console.log(keycloak.idTokenParsed.name);
          console.log(keycloak.idTokenParsed.given_name);
          console.log(keycloak.idTokenParsed.family_name);
      } else {
          keycloak.loadUserProfile(function() {
              console.log('Account Service');
              console.log(keycloak.profile.username);
              console.log(keycloak.profile.email);
              console.log(keycloak.profile.firstName + ' ' + keycloak.profile.lastName);
              console.log(keycloak.profile.firstName);
              console.log(keycloak.profile.lastName);
          }, function() {
              console.log('Failed to retrieve user details. Please enable claims or account role');
          });
      }
  };
  const loadFailure =  () => {
       console.log('Failed to load data.  Check console log');
  };
  const reloadData = () => {
      keycloak.updateToken(10000)
              // .success(loadData)
              .success(console.log("Debug: login seccessfully."))
              .error(() => {
                  console.log('Failed to load data.  User is logged out.');
              });
  }
  keycloak.init({ 
    onLoad: 'login-required',
    flow: 'standard' }).success(reloadData);
  **/
  </script>

</html>
